---
import Header from "../components/Header.astro";
import AsideMenu from "../components/AsideMenu.astro";
import Footer from "../components/Footer.astro";
import '../styles/global.css';

const { url } = Astro.request;
let fileName = (url.split("/").pop() || "").replace(".astro", "") || "Inicio";
fileName = fileName.charAt(0).toUpperCase() + fileName.slice(1).toLowerCase();
---
<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width" />
  <title>{fileName}</title>
  <link rel="icon" href="/favicon.svg" type="image/x-icon" />
  <link rel="shortcut icon" href="/favicon.svg" type="image/x-icon" />
</head>

<body class="min-h-screen text-gray-800 antialiased relative bg-white dark:bg-gray-900 dark:text-gray-100 transition-colors">
  <Header />
  <slot />
  <AsideMenu />

  <!-- BotÃ³n modo claro / oscuro -->
  <button id="themeToggleBtn"
      class="fixed bottom-8 right-24 w-12 h-12 bg-gray-800 text-white rounded-full shadow-lg flex items-center justify-center
             hover:bg-gray-700 dark:bg-yellow-400 dark:text-gray-900 transition-colors z-50">
    ğŸŒ™
  </button>

  <!-- BotÃ³n scroll to top -->
  <button id="scrollTopBtn" 
          class="fixed bottom-8 right-8 w-12 h-12 bg-indigo-600 text-white rounded-full shadow-lg flex items-center justify-center 
                 hover:bg-indigo-700 transition-colors z-50">
    â†‘
  </button>

  <Footer />

  <script>
    const scrollBtn = document.getElementById("scrollTopBtn");
    const themeBtn = document.getElementById("themeToggleBtn");

    if (scrollBtn) {
      scrollBtn.addEventListener("click", () => {
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    }

    const root = document.documentElement;
    const savedTheme = localStorage.getItem("theme");

    if (savedTheme === "dark") {
      root.classList.add("dark");
      if (themeBtn) themeBtn.textContent = "â˜€ï¸";
    }

    if (themeBtn) {
      themeBtn.addEventListener("click", () => {
        root.classList.toggle("dark");
        const isDark = root.classList.contains("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
        themeBtn.textContent = isDark ? "â˜€ï¸" : "ğŸŒ™";
      });
    }
  </script>
</body>
</html>

<style>
html, body {
  margin: 0;
  width: 100%;
  height: 100%;
}
* {
  transition: background-color 0.3s, color 0.3s;
}
</style>
