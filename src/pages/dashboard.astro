---
import Layout from '../layouts/Layout.astro';


// Datos simulados
const metrics = [
  { title: "Entradas vendidas hoy", value: 124, color: "bg-indigo-500" },
  { title: "Ingresos totales", value: "$12,540", color: "bg-yellow-400" },
  { title: "Usuarios activos", value: 87, color: "bg-purple-500" },
];

// Datos para la gráfica
const salesData = {
  labels: ["Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado", "Domingo"],
  datasets: [
    {
      label: "Entradas vendidas",
      data: [20, 35, 50, 40, 65, 90, 70],
      backgroundColor: "rgba(99,102,241,0.7)",
      borderColor: "rgba(99,102,241,1)",
      borderWidth: 2,
      borderRadius: 6
    },
    {
      label: "Usuarios activos",
      data: [15, 25, 45, 30, 55, 80, 60],
      backgroundColor: "rgba(236,72,153,0.7)",
      borderColor: "rgba(236,72,153,1)",
      borderWidth: 2,
      borderRadius: 6
    }
  ]
};
---
<Layout>
  <div class="min-h-screen bg-linear-to-br from-gray-900 via-indigo-900 to-purple-900 text-white flex flex-col md:flex-row">

    <!-- Main Content -->
    <main class="flex-1 max-w-full md:max-w-7xl mx-auto p-4 md:p-8 overflow-auto">

      <!-- Dashboard -->
      <section id="dashboard" class="py-16 flex flex-col gap-12">

        <h2 class="text-4xl font-extrabold text-center text-yellow-200 mb-10">
          Panel de Métricas
        </h2>

        <!-- Tarjetas de métricas -->
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 max-w-6xl mx-auto mb-12">
          {metrics.map(metric => (
            <div class={`p-6 rounded-xl shadow-2xl text-center transform transition duration-300 hover:scale-[1.03] hover:shadow-white ${metric.color}`}>
              <h3 class="text-3xl sm:text-4xl font-bold mb-2">{metric.value}</h3>
              <p class="font-semibold text-gray-100 text-sm sm:text-base">{metric.title}</p>
            </div>
          ))}
        </div>

        <!-- Gráfica de barras -->
        <div class="max-w-full sm:max-w-4xl mx-auto bg-gray-800 p-6 rounded-xl shadow-2xl">
          <h3 class="text-2xl font-bold text-center text-yellow-400 mb-6">Estadísticas Semanales</h3>
          <canvas id="dashboardChart" class="rounded-xl w-full h-64 sm:h-80"></canvas>
        </div>

      </section>

    </main>
  </div>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script type="module">
    document.addEventListener('DOMContentLoaded', () => {
      const salesData = {
        labels: ["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],
        datasets: [
          {
            label: "Entradas vendidas",
            data: [20,35,50,40,65,90,70],
            backgroundColor: "rgba(99,102,241,0.7)",
            borderColor: "rgba(99,102,241,1)",
            borderWidth: 2,
            borderRadius: 6
          },
          {
            label: "Usuarios activos",
            data: [15,25,45,30,55,80,60],
            backgroundColor: "rgba(236,72,153,0.7)",
            borderColor: "rgba(236,72,153,1)",
            borderWidth: 2,
            borderRadius: 6
          }
        ]
      };

      const ctx = document.getElementById('dashboardChart').getContext('2d');
      new Chart(ctx, {
        type: 'bar',
        data: salesData,
        options: {
          responsive: true,
          maintainAspectRatio: true,
          plugins: {
            legend: { labels: { color: 'white', font: { size: 14 } } },
            tooltip: { enabled: true }
          },
          scales: {
            x: { ticks: { color: 'white' }, grid: { color: 'rgba(255,255,255,0.1)' } },
            y: { ticks: { color: 'white' }, grid: { color: 'rgba(255,255,255,0.1)' }, beginAtZero: true }
          }
        }
      });
    });
  </script>
</Layout>

