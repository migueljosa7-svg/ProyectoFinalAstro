---
import Layout from '../layouts/Layout.astro';
---

<Layout>
  <div class="min-h-screen bg-linear-to-br from-gray-900 via-indigo-900 to-purple-900 text-white">
    <main class="max-w-7xl mx-auto p-4 md:p-8 lg:mr-16">

      <!-- Comunidad / Asistentes recientes -->
      <section id="community" class="py-16">
        <h2 class="text-4xl font-extrabold text-center text-yellow-200 mb-10">
          Comunidad del Festival
        </h2>
        <p class="text-center text-gray-300 mb-12 max-w-3xl mx-auto">
          Conoce a algunos de nuestros asistentes recientes y sus experiencias.
        </p>

        <div id="testimonials-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
          <!-- Los testimonios se generarán desde JS -->
        </div>
      </section>

    </main>
  </div>

  <script type="module">
    const API_URL = 'https://randomuser.me/api/?results=6&nat=us';
    const container = document.getElementById('testimonials-container');

    async function loadTestimonials() {
      try {
        const res = await fetch(API_URL);
        if (!res.ok) throw new Error(`Error al cargar los datos: ${res.status}`);
        const data = await res.json();

        const comments = [
          "¡Gran evento! Me encantó la organización.",
          "La música fue espectacular y el ambiente increíble.",
          "Volveré el próximo año sin duda.",
          "Una experiencia única, muy recomendable.",
          "Disfruté mucho cada minuto del festival.",
          "Excelente lugar y artistas de primera."
        ];

        data.results.forEach((user, index) => {
          const testimonial = document.createElement('div');
          testimonial.className = "bg-gray-800 p-6 rounded-xl shadow-2xl hover:shadow-yellow-400 transition duration-300 transform hover:scale-[1.03]";

          testimonial.innerHTML = `
            <img src="${user.picture.large}" alt="${user.name.first} ${user.name.last}" class="w-24 h-24 rounded-full mx-auto mb-4 border-2 border-yellow-400" />
            <h3 class="text-xl font-bold text-yellow-400 mb-2 text-center">${user.name.first} ${user.name.last}</h3>
            <p class="text-gray-300 text-center italic">"${comments[index % comments.length]}"</p>
          `;

          container.appendChild(testimonial);
        });

      } catch (error) {
        console.error(error);
        container.innerHTML = '<p class="text-center text-red-400">No se pudieron cargar los testimonios.</p>';
      }
    }

    loadTestimonials();
  </script>
</Layout>
