---
import Layout from '../layouts/Layout.astro';
import AsideMenu from '../components/AsideMenu.astro';
import '../styles/global.css';

// Conciertos más escuchados
const topConcerts = [
    { id: 1, artist: "The Cosmic Waves", title: "Noche de Estrellas", plays: 2500000, image: "https://picsum.photos/id/20/300/200" },
    { id: 2, artist: "Luna Nueva", title: "Luz Eterna", plays: 1800000, image: "https://picsum.photos/id/21/300/200" },
    { id: 3, artist: "DJ Vortex", title: "Ritmo Infinito", plays: 2100000, image: "https://picsum.photos/id/22/300/200" },
    { id: 4, artist: "Echo Sound", title: "Resonancia", plays: 1600000, image: "https://picsum.photos/id/23/300/200" },
    { id: 5, artist: "Neon Lights", title: "Brillo Nocturno", plays: 1950000, image: "https://picsum.photos/id/24/300/200" },
    { id: 6, artist: "Sonic Waves", title: "Onda Sonora", plays: 1700000, image: "https://picsum.photos/id/25/300/200" },
];
---

<Layout>
    <!-- El fondo GIF local se aplica al contenedor principal -->
    <div 
        class="min-h-screen text-white relative overflow-hidden"
        style="background-image: url('/concert_bg.gif'); background-size: cover; background-attachment: fixed; background-position: center;"
    >
        <!-- Overlay oscuro con gradiente para mejorar la legibilidad del texto -->
        <div class="absolute inset-0 bg-linear-to-b from-black/50 via-black/70 to-black/80 pointer-events-none"></div>
        
        <!-- Efecto de luz animado de fondo -->
        <div class="absolute inset-0 opacity-30 pointer-events-none">
            <div class="absolute top-0 left-1/4 w-96 h-96 bg-purple-600 rounded-full blur-3xl animate-pulse" style="animation: float 6s ease-in-out infinite;"></div>
            <div class="absolute bottom-0 right-1/4 w-96 h-96 bg-indigo-600 rounded-full blur-3xl animate-pulse" style="animation: float 8s ease-in-out infinite; animation-delay: 1s;"></div>
        </div>
        
        <!-- Contenedor principal para el contenido, dejando espacio para el Aside -->
        <main class="max-w-7xl mx-auto p-4 md:p-8 lg:mr-16 relative z-10"> 
            
            <!-- Sección de Conciertos Más Escuchados con animaciones profesionales -->
            <section class="py-16">
                <!-- Encabezado con animación -->
                <div class="text-center mb-16 animate-fade-in-down">
                    <h1 class="text-6xl md:text-7xl font-black text-center mb-4 bg-linear-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent" style="animation: glow 3s ease-in-out infinite;">
                        Conciertos Más Escuchados
                    </h1>
                    <div class="h-1 w-24 bg-linear-to-r from-indigo-400 to-purple-500 mx-auto mb-6 rounded-full" style="animation: expandWidth 1.5s ease-out;"></div>
                    <p class="text-center text-indigo-200 text-lg md:text-xl max-w-2xl mx-auto" style="animation: fadeInUp 0.8s ease-out 0.3s both;">
                        Descubre los conciertos más populares de nuestros artistas
                    </p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    {topConcerts.map((concert, index) => (
                        <div 
                            class="group relative overflow-hidden rounded-2xl shadow-2xl transform transition-all duration-500 cursor-pointer backdrop-blur-sm"
                            style={`animation: slideInUp 0.7s cubic-bezier(0.34, 1.56, 0.64, 1) ${index * 0.12}s both;`}
                            onmouseenter="this.style.boxShadow='0 20px 60px rgba(139, 92, 246, 0.6)'"
                            onmouseleave="this.style.boxShadow='0 20px 25px rgba(0, 0, 0, 0.5)'"
                        >
                            {/* Imagen de fondo con efecto de zoom */}
                            <img 
                                src={concert.image} 
                                alt={concert.title}
                                class="w-full h-72 object-cover group-hover:scale-125 transition-transform duration-700"
                            />
                            
                            {/* Overlay con gradiente mejorado */}
                            <div class="absolute inset-0 bg-linear-to-t from-black/95 via-black/50 to-transparent group-hover:from-indigo-950/95 group-hover:via-purple-900/50 transition-all duration-500"></div>
                            
                            {/* Efecto de brillo en el borde */}
                            <div class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none">
                                <div class="absolute inset-0 border-2 border-transparent group-hover:border-indigo-400/50 rounded-2xl" style="animation: borderGlow 2s ease-in-out infinite;"></div>
                            </div>
                            
                            {/* Contenido con animaciones */}
                            <div class="absolute inset-0 flex flex-col justify-end p-6 text-white">
                                {/* Título con animación */}
                                <h3 class="text-2xl md:text-3xl font-bold mb-2 group-hover:text-transparent group-hover:bg-linear-to-r group-hover:from-indigo-300 group-hover:to-pink-300 group-hover:bg-clip-text transition-all duration-300" style="animation: slideInRight 0.6s ease-out 0.1s both;">
                                    {concert.title}
                                </h3>
                                
                                {/* Artista */}
                                <p class="text-indigo-300 font-semibold mb-4 group-hover:text-indigo-100 transition-colors duration-300" style="animation: slideInRight 0.6s ease-out 0.2s both;">
                                    {concert.artist}
                                </p>
                                
                                {/* Contador de reproducciones con animación */}
                                <div class="flex items-center space-x-3 text-sm mb-4">
                                    <span class="text-yellow-400 text-xl animate-bounce" style="animation: bounce 1s ease-in-out infinite;">♫</span>
                                    <span class="font-semibold text-gray-200">{(concert.plays / 1000000).toFixed(1)}M reproducciones</span>
                                </div>
                                
                                {/* Barra de progreso animada con efecto de brillo */}
                                <div class="mt-4 w-full bg-white/10 rounded-full h-3 overflow-hidden backdrop-blur-sm border border-white/20">
                                    <div 
                                        class="bg-linear-to-r from-indigo-400 via-purple-400 to-pink-400 h-full rounded-full group-hover:from-yellow-300 group-hover:via-pink-400 group-hover:to-indigo-600 transition-all duration-500 relative"
                                        style={`width: ${(concert.plays / 2500000) * 100}%; animation: slideInLeft 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) ${index * 0.12}s both, shimmer 2s ease-in-out infinite;`}
                                    >
                                        <div class="absolute inset-0 bg-white/30 rounded-full blur-sm" style="animation: pulse 2s ease-in-out infinite;"></div>
                                    </div>
                                </div>
                                
                                {/* Indicador de posición */}
                                <div class="mt-4 flex items-center justify-between text-xs text-gray-400">
                                    <span>Posición #{concert.id}</span>
                                    <span class="text-indigo-400 font-semibold">★★★★★</span>
                                </div>
                            </div>
                        </div>
                    ))}
                </div>
            </section>

        </main>
    </div>

    <!-- Aside Menu (Menú lateral que se esconde) -->
    <AsideMenu />
</Layout>

<style>
    /* Animaciones profesionales */
    @keyframes slideInUp {
        from {
            opacity: 0;
            transform: translateY(40px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes slideInRight {
        from {
            opacity: 0;
            transform: translateX(-20px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes slideInLeft {
        from {
            width: 0;
        }
        to {
            width: 100%;
        }
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }

    @keyframes fadeInDown {
        from {
            opacity: 0;
            transform: translateY(-30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes float {
        0%, 100% {
            transform: translateY(0px);
        }
        50% {
            transform: translateY(-20px);
        }
    }

    @keyframes glow {
        0%, 100% {
            text-shadow: 0 0 20px rgba(139, 92, 246, 0.5), 0 0 40px rgba(168, 85, 247, 0.3);
        }
        50% {
            text-shadow: 0 0 30px rgba(139, 92, 246, 0.8), 0 0 60px rgba(168, 85, 247, 0.5);
        }
    }

    @keyframes expandWidth {
        from {
            width: 0;
        }
        to {
            width: 96px;
        }
    }

    @keyframes borderGlow {
        0%, 100% {
            box-shadow: inset 0 0 20px rgba(139, 92, 246, 0.3);
        }
        50% {
            box-shadow: inset 0 0 40px rgba(168, 85, 247, 0.6);
        }
    }

    @keyframes shimmer {
        0%, 100% {
            opacity: 1;
        }
        50% {
            opacity: 0.8;
        }
    }

    @keyframes bounce {
        0%, 100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-10px);
        }
    }

    /* Clases de animación */
    .animate-fade-in {
        animation: fadeIn 0.8s ease-out forwards;
        opacity: 0;
    }

    .animate-fade-in-down {
        animation: fadeInDown 0.8s ease-out forwards;
        opacity: 0;
    }

    /* Efecto de hover mejorado */
    .group:hover {
        z-index: 10;
    }
</style>